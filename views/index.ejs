<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title> <!-- Use the passed title -->
</head>
<body>
    <h1><%= title %></h1> <!-- Display the title passed from the route -->
    
    <% if (user) { %>
        <!-- Show this content only for logged-in users -->
        <p>Hello, <%= user.displayName %>! Welcome back to your anime watchlist!</p>
        <a href="/logout">Logout</a> <!-- Log out button/link for logged-in users -->

        <h2>Anime List</h2> <!-- Section heading for the anime list -->
        <div id="animeListContainer">
        <ul id="animeList">
            <% if (animeList && animeList.length > 0) { %> <!-- Check if animeList is available and has items -->
                <% animeList.forEach(anime => { %> <!-- Loop through each anime in the list -->
                    <li class="anime-item"></li>>
                        <a href="/anime/<%= anime.id %>"> <!-- Link to the details page -->
                            <img src="<%= anime.image %>" alt="<%= anime.title %>"> <!-- Display the anime image -->
                            <h3><%= anime.title %></h3> <!-- Display the anime title -->
                        </a>
                    </li>
                <% }); %> <!-- Close the forEach loop -->
            <% } else { %>
                <p>No anime found.</p> <!-- Message if no anime are available -->
            <% } %> <!-- Close the if check for animeList -->
        </ul>
    </div>
        



    <% } else { %>
        <!-- Show this content for logged-out users -->
        <p>Please <button><a href="/auth/google">login with Google</a></button> to fully access the website.</p>
    <% } %>
</body>
</html>